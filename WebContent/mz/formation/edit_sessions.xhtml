<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j">

<rich:panel>
	<ui:include src="fields/reference.xhtml"/>
	<ui:include src="fields/libelle.xhtml"/>
</rich:panel>	

	<s:decorate template="../layout/formation.xhtml">
		<ui:define name="bloc1">
			<ui:include src="_yearSelector.xhtml">
				<ui:param name="render" value="editSessions" />
			</ui:include>

			<rich:dataTable value="#{formationManager.currentSessions}" var="dto" id="editSessions">
				<rich:column>
					<h:outputText value="#{dto.organisme}" />
				</rich:column>
				<rich:column>
					<f:facet name="header">Janvier</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_janvier_#{formation.duree}" size="10"
						value="#{dto.arraySessions[0]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_janvier_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Février</f:facet>

					<h:inputText id="_#{formationManager.currentYear}_fevrier_#{formation.duree}" size="10" value="#{dto.arraySessions[1]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_fevrier_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>

				</rich:column>
				<rich:column>
					<f:facet name="header">Mars</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_mars_#{formation.duree}" size="10" value="#{dto.arraySessions[2]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_mars_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Avril</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_avril_#{formation.duree}" size="10" value="#{dto.arraySessions[3]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_avril_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Mai</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_mai_#{formation.duree}" size="10" value="#{dto.arraySessions[4]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_mai_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Juin</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_juin_#{formation.duree}" size="10" value="#{dto.arraySessions[5]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_juin_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Juillet</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_juillet_#{formation.duree}" size="10" value="#{dto.arraySessions[6]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_juillet_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Août</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_aout_#{formation.duree}" size="10" value="#{dto.arraySessions[7]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_aout_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Septembre</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_septembre_#{formation.duree}" size="10"
						value="#{dto.arraySessions[8]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_septembre_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Octobre</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_octobre_#{formation.duree}" size="10" value="#{dto.arraySessions[9]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_octobre_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Novembre</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_novembre_#{formation.duree}" size="10"
						value="#{dto.arraySessions[10]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_novembre_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
				<rich:column>
					<f:facet name="header">Décembre</f:facet>
					<h:inputText id="_#{formationManager.currentYear}_decembre_#{formation.duree}" size="10"
						value="#{dto.arraySessions[11]}">
						<f:converter converterId="com.plb.SessionsConverter" />
						<a:ajax event="change"
							render="_#{formationManager.currentYear}_decembre_#{formation.duree},sessionMessages"
							execute="@this" />
					</h:inputText>
				</rich:column>
			</rich:dataTable>

			<h:messages id="sessionMessages" styleClass="message"
				errorClass="errormsg" infoClass="infomsg" warnClass="warnmsg" />
		</ui:define>
		<ui:define name="buttons">
			<ui:include src="_editSessionButtons.xhtml" />
		</ui:define>
	</s:decorate>

</ui:composition>
