<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j" template="../layout/template.xhtml">


	<ui:define name="body">
		<h:form id="detailForm">
			<rich:tabPanel switchType="client" id="tabsPanel">
				<rich:tab header="Propriétés" id="propTab">
					<a:outputPanel id="formationPanel">
						<a:outputPanel
							rendered="#{formationManager.visuMode or formationManager.editSessionMode}">
							<ui:include src="visu.xhtml" />
						</a:outputPanel>
						<a:outputPanel
							rendered="#{formationManager.creationMode or formationManager.editMode}">
							<ui:include src="edit.xhtml" />
						</a:outputPanel>
					</a:outputPanel>

				</rich:tab>
				<rich:tab header="Référencement" rendered="#{sessionDataManager.managerIntervenantsManager and !formationManager.creationMode}">
					<a:outputPanel id="referencementPanel">
						<a:outputPanel
							rendered="#{formationManager.visuMode or formationManager.editSessionMode}">
							<ui:include src="visu_referencement.xhtml" />
						</a:outputPanel>
						<a:outputPanel
							rendered="#{formationManager.editMode}">
							<ui:include src="edit_referencement.xhtml" />
						</a:outputPanel>
					</a:outputPanel>

				</rich:tab>
				<rich:tab header="Web">
					<a:outputPanel id="webPanel">
						<a:outputPanel id="webVisuPanel"
							rendered="#{formationManager.visuMode or formationManager.editSessionMode or !sessionDataManager.managerIntervenantsManager}">
							<ui:include src="visu_web.xhtml" />
						</a:outputPanel>
						<a:outputPanel
							rendered="#{(formationManager.creationMode or formationManager.editMode) and sessionDataManager.managerIntervenantsManager}">
							<ui:include src="edit_web.xhtml" />
						</a:outputPanel>
					</a:outputPanel>
				</rich:tab>
				<rich:tab header="Sessions"
					rendered="#{!formationManager.creationMode}">
					<a:outputPanel id="sessionsPanel">
						<a:outputPanel rendered="#{!formationManager.editSessionMode}">
							<ui:include src="visu_sessions.xhtml" />
						</a:outputPanel>
						<a:outputPanel rendered="#{formationManager.editSessionMode}">
							<ui:include src="edit_sessions.xhtml" />
						</a:outputPanel>
					</a:outputPanel>
				</rich:tab>

				<rich:tab header="Historique"
					rendered="#{!formationManager.creationMode}">
					<a:outputPanel id="historiquePanel"
						rendered="#{!formationManager.creationMode}">
						<rich:dataTable value="#{formationManager.historique}" var="event" id="hisTable">
							<ui:include src="../common/historique.xhtml">
								<ui:param name="manager" value="#{formationManager}" />
								<ui:param name="showFormation" value="#{false}" />
							</ui:include>
						</rich:dataTable>
					</a:outputPanel>
				</rich:tab>
			</rich:tabPanel>
		</h:form>
		<h:form>
			<a:poll id="polling" action="#{formationManager.maintainConversation}"
				interval="#{CONVERSATION_FREQUENCY}" />
		</h:form>
	</ui:define>

	<ui:define name="tools">
		<h:form>
			<a:commandButton value="Envoyer un message"
				action="#{formationManager.prepareComment()}" render="commentPopup"
				oncomplete="#{rich:component('commentPopup')}.show();" />

			<ui:include src="_tools.xhtml" />
		</h:form>
		<ui:include src="commentPanel.xhtml" />
		<ui:include src="archivePanel.xhtml" />
		<ui:include src="unarchivePanel.xhtml" />
		<ui:include src="deletePanel.xhtml" />
		<ui:include src="formationPartenairePanel.xhtml" />
		<ui:include src="formationFilierePanel.xhtml" />
		<ui:include src="formationAssocieesPanel.xhtml" />
		<ui:include src="formationMutualiseesPanel.xhtml" />
		<ui:include src="../devis/devisPanel.xhtml" />
	</ui:define>
</ui:composition>
