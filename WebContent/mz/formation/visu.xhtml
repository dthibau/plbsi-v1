<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.org/schema/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:a="http://richfaces.org/a4j">

#{messages['formation.dateCreation']} : <h:outputText
		value="#{formation.dateCreation}">
		<s:convertDateTime type="date" />
	</h:outputText> ; #{messages['formation.lastUpdateDate']} : <h:outputText
		value="#{formation.dateModification}">
		<s:convertDateTime type="date" />
	</h:outputText>
	<s:decorate id="propDecorate"
		template="#{sessionDataManager.managerIntervenantsManager ? 'layout/properties.xhtml' : 'layout/properties_commercial.xhtml'}">
		<ui:define name="identification">
			<ui:include src="fields/reference.xhtml" />
			<ui:include src="fields/libelle.xhtml" />

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">#{messages['formation.visible']}</ui:define>
				<h:outputText value="#{formation.visible}" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">#{messages['formation.precision']}</ui:define>
				<h:outputText value="#{formation.precision}" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.duree']}" />
				</ui:define>
				<h:outputText value="#{formation.duree}" />
			</s:decorate>

			<s:decorate rendered="#{!sessionDataManager.commercial}"
				template="../layout/display.xhtml">
				<ui:define name="label">#{messages['formation.statut']}</ui:define>
				<h:outputText value="#{formation.statut}" />
			</s:decorate>
		</ui:define>
		<ui:define name="filieres">
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.categorie']}" />
				</ui:define>
				<h:outputText value="#{formation.categorie.filiere.libelle} -> #{formation.categorie.libelle}" />
			</s:decorate>

			<s:decorate
				rendered="#{sessionDataManager.managerIntervenantsManager}"
				template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.rangCategorie']}" />
				</ui:define>
				<h:outputText value="#{formation.rangCategorie}" />
			</s:decorate>

			<s:decorate template="../layout/displayArea.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.formationAssociees']}" />
				</ui:define>
				<rich:dataTable value="#{formation.formationAssociees}"
					var="fFormation">
					<rich:column>
						<f:facet name="header">
						#{messages['formation.formationAssociees']}
						</f:facet>
						<h:outputText value="#{fFormation.libelle}" />
					</rich:column>
				</rich:dataTable>
			</s:decorate>
			<s:decorate template="../layout/displayArea.xhtml" rendered="#{not empty formationManager.formationSuivantes}">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.formationSuivantes']}" />
				</ui:define>
				<rich:dataTable id="formationSuivantesListes"
					value="#{formationManager.formationSuivantes}" var="fFormation">
					<rich:column>
						<f:facet name="header">
						#{messages['formation.formationSuivantes']}
						</f:facet>
							#{fFormation.libelle}				
					</rich:column>
				</rich:dataTable>
			</s:decorate>

			<s:decorate template="../layout/displayArea.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.categoriesSecondaires']}" />
				</ui:define>
				<rich:dataTable value="#{formation.categoriesSecondaires}"
					var="fFiliere" style="margin-left:0px">
					<rich:column>
						<f:facet name="header">
						#{messages['formation.categorie']}
					</f:facet>
						<h:outputText value="#{fFiliere.categorie != null ? fFiliere.categorie.libelle :'A définir'}" />
					</rich:column>
					<rich:column>
						<f:facet name="header">
						#{messages['formation.filiere']}
						</f:facet>
						<a:outputPanel>#{fFiliere.libelle}</a:outputPanel>
					</rich:column>
					<rich:column>
						<f:facet name="header">
						#{messages['formation.rangCategorie']}
					</f:facet>
						<h:outputText value="#{fFiliere.rang}" />
					</rich:column>
				</rich:dataTable>
			</s:decorate>


		</ui:define>

		
		<ui:define name="commercial">
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.remarques']}" />
				</ui:define>
				<h:outputFormat escape="false"
					value="#{formation.multiLigneRemarques}" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.tarifInter']}" />
				</ui:define>
				<h:outputText value="#{formation.codeTarifInter}" />
				<h:outputText rendered="#{empty formation.codeTarifInter}"
					value="#{messages['formation.tarifInter.sans']}" />
			</s:decorate>


			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.prix']}" />
				</ui:define>
				<h:outputText
					styleClass="#{formation.hasObsoleteTarif(lastUpdateTarifs) ? 'obsolete' : ''}"
					rendered="#{(empty formation.codeTarifInter or formation.codeTarifInter.equals('E0')) and formation.prix !=0}"
					value="#{formation.prix}">
					<f:convertNumber currencySymbol="€" type="currency" locale="FR" />
				</h:outputText>
				<h:outputText
					styleClass="#{formation.hasObsoleteTarif(lastUpdateTarifs) ? 'obsolete' : ''}"
					rendered="#{(empty formation.codeTarifInter or formation.codeTarifInter.equals('E0')) and formation.prix ==0}"
					value="#{messages['formation.intra']}" />
				<h:outputText
					rendered="#{!empty formation.codeTarifInter and !formation.codeTarifInter.equals('E0')}"
					value="#{formationManager.prixInter}">
					<f:convertNumber currencySymbol="€" type="currency" locale="FR" />
				</h:outputText>
			</s:decorate>



			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.tarifIntra']}" />
				</ui:define>
				<h:outputText value="#{formation.libreIntra}" />
			</s:decorate>
			
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.remise']}" />
				</ui:define>
				<h:outputText value="#{formation.remise}" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.origine']}" />
				</ui:define>
				<h:outputText value="#{formation.origine}" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText
						value="#{messages['formation.coursPlbCataloguePartenaire']}" />
				</ui:define>
				<h:outputText value="#{formation.coursPlbCataloguePartenaire}" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.plbInter']}" />
				</ui:define>
				<h:selectBooleanCheckbox value="#{formation.plbInter}"
					disabled="true" />
			</s:decorate>

			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.support']}" />
				</ui:define>
				<h:selectBooleanCheckbox value="#{formation.support}"
					disabled="true" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.distance']}" />
				</ui:define>
				<h:outputText value="#{formation.distance}" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.elearning']}" />
				</ui:define>
				<h:selectBooleanCheckbox value="#{formation.elearning}"
					disabled="true" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.certification']}" />
				</ui:define>
				<h:outputText value="#{formation.certification}" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.officiel']}" />
				</ui:define>
				<h:outputText value="#{formation.officiel}" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.niveau']}" />
				</ui:define>
				<h:outputText value="#{formation.niveau}" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.eligibleCpf']}" />
				</ui:define>
				<h:selectBooleanCheckbox value="#{formation.eligibleCpf}"
					disabled="true" />
			</s:decorate>
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.codeCpf']}" />
				</ui:define>
				<h:outputText value="#{formation.codeCpf}" /> 
			</s:decorate>

			<s:decorate template="../layout/display.xhtml"
				rendered="#{not empty formation.argumentaire}">
				<ui:define name="label">
					<h:outputText styleClass="name"
						value="#{messages['formation.argumentaire.show']}" />
				</ui:define>
				<h:selectBooleanCheckbox
					value="#{formationManager.showArgumentaire}"
					rendered="#{not empty formation.argumentaire}">
					<a:ajax event="change" render="argumentairePanel" />
				</h:selectBooleanCheckbox>
			</s:decorate>
			<a:outputPanel id="argumentairePanel">
				<s:decorate template="../layout/display.xhtml"
					rendered="#{not empty formation.argumentaire and formationManager.showArgumentaire}">
					<h:outputFormat escape="false"
						value="#{formation.multiLigneArgumentaire}" />
				</s:decorate>
			</a:outputPanel>

		</ui:define>
		<ui:define name="mutualisees">

			<rich:dataTable rendered="#{formation.formationMutualisees != null}"
				value="#{formation.formationMutualisees.formations}" var="formation">
				<rich:column>
					<f:facet name="header">#{messages['formation.reference']}</f:facet>
					<h:outputText value="#{formation.reference}" />
				</rich:column>
				<rich:column>
					<f:facet name="header">#{messages['formation.libelle']}</f:facet>
					<h:outputText value="#{formation.libelle}" />
				</rich:column>
			</rich:dataTable>

		</ui:define>

		<ui:define name="partenaires">
			<s:decorate template="../layout/display.xhtml">
				<ui:define name="label">
					<h:outputText value="#{messages['formation.type']}" />
				</ui:define>
				<h:outputText value="#{formation.type}" />&#160;<span
					class="#{formation.type}">&#160;&#160;&#160;&#160;</span>&#160;&#160;
				<h:outputText rendered="#{formation.type.equals('rouge')}"
					value="#{messages['warn.contenu']}" styleClass="warn" />
			</s:decorate>

			<rich:dataTable value="#{formation.formationsPartenaire}"
				var="fPartenaire">
				<rich:column>
					<f:facet name="header">
						#{messages['partenaire.nom']}
						</f:facet>
							#{fPartenaire.partenaire.nom}				
					</rich:column>
				<rich:column>
					<f:facet name="header">
						#{messages['partenaire.remise']}
						</f:facet>
							#{fPartenaire.partenaire.remise}				
					</rich:column>
				<rich:column>
					<f:facet name="header">
						#{messages['formationPartenaire.code']}
					</f:facet>
					<h:outputText value="#{fPartenaire.code}" />
				</rich:column>
				<rich:column>
					<f:facet name="header">
						#{messages['formationPartenaire.prix']}
					</f:facet>
					<h:outputText value="#{fPartenaire.prix}">
						<f:convertNumber currencySymbol="€" type="currency" locale="FR" />
					</h:outputText>

				</rich:column>
				<rich:column>
					<f:facet name="header">
						#{messages['formationPartenaire.url']}
					</f:facet>
					<a href="#{fPartenaire.url}" target="_blank">#{fPartenaire.url}</a>
				</rich:column>
			</rich:dataTable>
		</ui:define>
		<ui:define name="buttons">

			<a:commandButton value="Editer" id="editButton"
				action="#{formationManager.setEditMode}"
				render="formationPanel,referencementPanel,webPanel,sessionsPanel">
				<f:param name="cid" value="#{conversation.id}" />
			</a:commandButton>

			<a:commandButton
				rendered="#{sessionDataManager.managerIntervenantsManager}"
				value="Archiver">
				<rich:componentControl target="archivePopup" operation="show" />
			</a:commandButton>

			<a:commandButton
				rendered="#{sessionDataManager.managerIntervenantsManager}"
				value="Supprimer">
				<rich:componentControl target="deletePopup" operation="show" />
			</a:commandButton>

		</ui:define>
	</s:decorate>

</ui:composition>
